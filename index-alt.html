<!DOCTYPE html><html lang="en">  <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><canvas class="zdog-canvas" id="game"></canvas><title>BackFlipped - js13k 2019</title>
    <style>body{margin:0;font-family:"Courier New",Courier,monospace;overflow:hidden}body,html{width:100%;height:100%}.zdog-canvas{display:block;width:100%;height:100%}.title{position:absolute;pointer-events:none;text-align:center;-webkit-text-stroke-width:2px;font-weight:800;top:50%;left:50%}.debug{position:absolute;top:0;background-color:#ccccccBB;font-size:12px}.stats{position:absolute;bottom:5%;background-color:#ccccccBB;font-size:12px}.top{font-size:70px;color:#223e32;-webkit-text-stroke-color:#fff;transform:translate(-125%,-190%) skewY(-10deg);text-shadow:-2px -5px #223e32}.bottom{font-size:90px;color:#a7c06d;-webkit-text-stroke-color:#000;transform:skewY(10deg) translate(-40%,-65%);text-shadow:2px -5px #a7c06d}.start{font-size:30px;width:250px;color:#fff;-webkit-text-stroke-width:0;text-shadow:3px -3px #000;transform:translate(-50%,300%);animation-name:gamestart-start;animation-duration:1s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;animation-direction:alternate}.notification{position:absolute;top:10px;right:10px;font-size:16px;padding:5px;padding-top:10px;padding-bottom:10px;color:#fff;pointer-events:none}.notification::before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;transform:skewY(3deg);border:#fff solid 2px;pointer-events:none}.int{color:#fff;position:absolute;pointer-events:none;text-align:center;font-weight:800;top:0;left:50%;visibility:hidden}.remaining{font-size:30px;transform:translate(-50%,-50%);width:250px}.jackpot{font-size:20px;transform:translate(25%,100%) rotate(-10deg);width:200px;color:#000;background-color:#fff;mix-blend-mode:screen}.score{font-size:20px;transform:translate(-110%,50%);width:80px;border:2px dotted #fff}.colorselect,.levelselect{color:#000;position:absolute;pointer-events:none;text-align:center;font-weight:800;top:50%;left:50%;visibility:hidden;font-size:20px;background-color:#ffffffaa;width:180px;padding:5px}.levelselect{transform:translate(-50%,-140%);height:50px}.colorselect{transform:translate(-50%,0);height:150px}@keyframes gamestart-top{from{transform:translate(-125%,-190%) skewY(-10deg) scale(1,1);opacity:1}to{transform:translate(-125%,-190%) skewY(-10deg) scale(-1.5,1.5) rotate(20deg);opacity:0}}@keyframes gamestart-bottom{from{transform:skewY(10deg) translate(-40%,-65%) scale(1,1);opacity:1}to{transform:skewY(10deg) translate(-40%,-65%) scale(1.5,-1.5) rotate(-20deg);opacity:0}}@keyframes gamestart-start{from{transform:translate(-50%,250%)}to{transform:translate(-50%,200%)}}@keyframes jackpot-gain-1{from{transform:translate(25%,80%) rotate(-10deg)}to{transform:translate(25%,100%) rotate(-10deg)}}@keyframes jackpot-gain-2{from{transform:translate(25%,80%) rotate(-10deg)}to{transform:translate(25%,100%) rotate(-10deg)}}@keyframes jackpot-claim-1{0%{transform:translate(25%,100%) rotate(-10deg)}50%{transform:translate(25%,100%) rotate(-190deg)}100%{transform:translate(25%,100%) rotate(-370deg)}}@keyframes jackpot-claim-2{0%{transform:translate(25%,100%) rotate(-10deg)}50%{transform:translate(25%,100%) rotate(-190deg)}100%{transform:translate(25%,100%) rotate(-370deg)}}@media only screen and (max-width:600px){.top{font-size:50px}.bottom{font-size:60px}.start{font-size:20px}.notification{font-size:12px}}@media only screen and (max-width:359px){.top{font-size:30px}.bottom{font-size:40px}.start{font-size:15px}.notification{font-size:10px}}</style>
    <link rel="shortcut icon" href="favicon16.png" type="image/png"><meta name="monetization" content="$coil.xrptipbot.com/3mQNkjRsTVid5VZd6XJv4g">  </head>  <body>
    <script> (function(d,a){d.Zdog=a()})(this,function(){var d={};d.TAU=2*Math.PI;d.extend=function(b,a){for(var c in a)b[c]=a[c];return b};d.lerp=function(b,a,c){return(a-b)*c+b};d.modulo=function(b,a){return(b%a+a)%a};var a={2:function(a){return a*a},3:function(a){return a*a*a},4:function(a){return a*a*a*a},5:function(a){return a*a*a*a*a}};d.easeInOut=function(b,d){if(1==d)return b;b=Math.max(0,Math.min(1,b));var c=.5>b,e=(a[d]||a[2])((c?b:1-b)/.5);e/=2;return c?e:1-e};return d}); (function(d,a){d.Zdog.CanvasRenderer=a()})(this,function(){var d={isCanvas:!0,begin:function(a){a.beginPath()},move:function(a,b,d){a.moveTo(d.x,d.y)},line:function(a,b,d){a.lineTo(d.x,d.y)},bezier:function(a,b,d,c,e){a.bezierCurveTo(d.x,d.y,c.x,c.y,e.x,e.y)},closePath:function(a){a.closePath()},setPath:function(){},renderPath:function(a,b,f,c){this.begin(a,b);f.forEach(function(e){e.render(a,b,d)});c&&this.closePath(a,b)},stroke:function(a,b,d,c,e){d&&(a.strokeStyle=c,a.lineWidth=e,a.stroke())}, fill:function(a,b,d,c){d&&(a.fillStyle=c,a.fill())},end:function(){}};return d}); (function(d,a){var b=d.Zdog;b.Vector=a(b)})(this,function(d){function a(a){this.set(a)}function b(a,b,d,h){if(b&&0!==b%c){var e=Math.cos(b);b=Math.sin(b);var k=a[d],g=a[h];a[d]=k*e-g*b;a[h]=g*e+k*b}}function f(a){return 1E-8>Math.abs(a-1)?1:Math.sqrt(a)}var c=d.TAU;a.prototype.set=function(a){this.x=a&&a.x||0;this.y=a&&a.y||0;this.z=a&&a.z||0;return this};a.prototype.write=function(a){if(!a)return this;this.x=void 0!=a.x?a.x:this.x;this.y=void 0!=a.y?a.y:this.y;this.z=void 0!=a.z?a.z:this.z;return this}; a.prototype.rotate=function(a){if(a)return this.rotateZ(a.z),this.rotateY(a.y),this.rotateX(a.x),this};a.prototype.rotateZ=function(a){b(this,a,"x","y")};a.prototype.rotateX=function(a){b(this,a,"y","z")};a.prototype.rotateY=function(a){b(this,a,"x","z")};a.prototype.isSame=function(a){return a?this.x===a.x&&this.y===a.y&&this.z===a.z:!1};a.prototype.add=function(a){if(!a)return this;this.x+=a.x||0;this.y+=a.y||0;this.z+=a.z||0;return this};a.prototype.subtract=function(a){if(!a)return this;this.x-= a.x||0;this.y-=a.y||0;this.z-=a.z||0;return this};a.prototype.multiply=function(a){if(void 0==a)return this;"number"==typeof a?(this.x*=a,this.y*=a,this.z*=a):(this.x*=void 0!=a.x?a.x:1,this.y*=void 0!=a.y?a.y:1,this.z*=void 0!=a.z?a.z:1);return this};a.prototype.transform=function(a,b,c){this.multiply(c);this.rotate(b);this.add(a);return this};a.prototype.lerp=function(a,b){this.x=d.lerp(this.x,a.x||0,b);this.y=d.lerp(this.y,a.y||0,b);this.z=d.lerp(this.z,a.z||0,b);return this};a.prototype.magnitude= function(){return f(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.magnitude2d=function(){return f(this.x*this.x+this.y*this.y)};a.prototype.copy=function(){return new a(this)};return a}); (function(d,a){var b=d.Zdog;b.Anchor=a(b,b.Vector,b.CanvasRenderer,b.SvgRenderer)})(this,function(d,a,b,f){function c(a){this.create(a||{})}function e(a){return function(b){function c(a){this.create(a||{})}c.prototype=Object.create(a.prototype);c.prototype.constructor=c;c.defaults=d.extend({},a.defaults);d.extend(c.defaults,b);c.optionKeys=a.optionKeys.slice(0);Object.keys(c.defaults).forEach(function(a){1!=!c.optionKeys.indexOf(a)&&c.optionKeys.push(a)});c.subclass=e(c);return c}}var k=d.TAU,g={x:1, y:1,z:1};c.prototype.create=function(b){this.children=[];d.extend(this,this.constructor.defaults);this.setOptions(b);this.translate=new a(b.translate);this.rotate=new a(b.rotate);this.scale=(new a(g)).multiply(this.scale);this.origin=new a;this.renderOrigin=new a;this.addTo&&this.addTo.addChild(this)};c.defaults={};c.optionKeys=Object.keys(c.defaults).concat(["rotate","translate","scale","addTo"]);c.prototype.setOptions=function(a){var b=this.constructor.optionKeys,c;for(c in a)-1!=b.indexOf(c)&& (this[c]=a[c])};c.prototype.addChild=function(a){-1==this.children.indexOf(a)&&(a.remove(),a.addTo=this,this.children.push(a))};c.prototype.removeChild=function(a){a=this.children.indexOf(a);-1!=a&&this.children.splice(a,1)};c.prototype.remove=function(){this.addTo&&this.addTo.removeChild(this)};c.prototype.update=function(){0!=this.visible&&(this.reset(),this.children.forEach(function(a){a.update()}),this.transform(this.translate,this.rotate,this.scale))};c.prototype.reset=function(){this.renderOrigin.set(this.origin)}; c.prototype.transform=function(a,b,c){this.renderOrigin.transform(a,b,c);this.children.forEach(function(d){d.transform(a,b,c)})};c.prototype.updateGraph=function(){this.update();this.updateFlatGraph();this.flatGraph.forEach(function(a){a.updateSortValue()});this.flatGraph.sort(c.shapeSorter)};c.shapeSorter=function(a,b){return a.sortValue-b.sortValue};Object.defineProperty(c.prototype,"flatGraph",{get:function(){this._flatGraph||this.updateFlatGraph();return this._flatGraph},set:function(a){this._flatGraph= a}});c.prototype.updateFlatGraph=function(){this.flatGraph=this.getFlatGraph()};c.prototype.getFlatGraph=function(){return this.addChildFlatGraph([this])};c.prototype.addChildFlatGraph=function(a){this.children.forEach(function(b){b=b.getFlatGraph();Array.prototype.push.apply(a,b)});return a};c.prototype.updateSortValue=function(){this.sortValue=this.renderOrigin.z};c.prototype.render=function(){};c.prototype.renderGraphCanvas=function(a){this.flatGraph.forEach(function(c){c.render(a,b)})};c.prototype.renderGraphSvg= function(a){this.flatGraph.forEach(function(b){b.render(a,f)})};c.prototype.copy=function(a){var b={};this.constructor.optionKeys.forEach(function(a){b[a]=this[a]},this);d.extend(b,a);return new this.constructor(b)};c.prototype.copyGraph=function(a){var b=this.copy(a);this.children.forEach(function(a){a.copyGraph({addTo:b})});return b};c.prototype.normalizeRotate=function(){this.rotate.x=d.modulo(this.rotate.x,k);this.rotate.y=d.modulo(this.rotate.y,k);this.rotate.z=d.modulo(this.rotate.z,k)};c.subclass= e(c);return c});(function(d,a){d.Zdog.Dragger=a(d)})(this,function(d){function a(a){this.create(a||{})}a.prototype.create=function(a){};a.prototype.getQueryElement=function(a){"string"==typeof a&&(a=document.querySelector(a));return a};return a}); (function(d,a){var b=d.Zdog;b.Illustration=a(b,b.Anchor,b.Dragger)})(this,function(d,a,b){function f(){}var c=d.TAU,e=a.subclass({element:void 0,centered:!0,zoom:1,dragRotate:!1,resize:!1,onPrerender:f,onDragStart:f,onDragMove:f,onDragEnd:f,onResize:f});d.extend(e.prototype,b.prototype);e.prototype.create=function(c){a.prototype.create.call(this,c);b.prototype.create.call(this,c);this.setElement(this.element);this.setDragRotate(this.dragRotate);this.setResize(this.resize)};e.prototype.setElement= function(a){a=this.getQueryElement(a);var b=a.nodeName.toLowerCase();"canvas"==b?this.setCanvas(a):"svg"==b&&this.setSvg(a)};e.prototype.setSize=function(a,b){a=Math.round(a);b=Math.round(b);this.isCanvas?this.setSizeCanvas(a,b):this.isSvg&&this.setSizeSvg(a,b)};e.prototype.setResize=function(a){this.resize=a;this.resizeListener||(this.resizeListener=this.onWindowResize.bind(this));a?(window.addEventListener("resize",this.resizeListener),this.onWindowResize()):window.removeEventListener("resize", this.resizeListener)};e.prototype.onWindowResize=function(){this.setMeasuredSize();this.onResize(this.width,this.height)};e.prototype.setMeasuredSize=function(){if("fullscreen"==this.resize){var a=window.innerWidth;var b=window.innerHeight}else b=this.element.getBoundingClientRect(),a=b.width,b=b.height;this.setSize(a,b)};e.prototype.renderGraph=function(a){this.isCanvas?this.renderGraphCanvas(a):this.isSvg&&this.renderGraphSvg(a)};e.prototype.updateRenderGraph=function(a){this.updateGraph();this.renderGraph(a)}; e.prototype.setCanvas=function(a){this.element=a;this.isCanvas=!0;this.ctx=this.element.getContext("2d");this.setSizeCanvas(a.width,a.height)};e.prototype.setSizeCanvas=function(a,b){this.width=a;this.height=b;var c=this.pixelRatio=window.devicePixelRatio||1;this.element.width=this.canvasWidth=a*c;this.element.height=this.canvasHeight=b*c;1<c&&!this.resize&&(this.element.style.width=a+"px",this.element.style.height=b+"px")};e.prototype.renderGraphCanvas=function(b){b=b||this;this.prerenderCanvas(); a.prototype.renderGraphCanvas.call(b,this.ctx);this.postrenderCanvas()};e.prototype.prerenderCanvas=function(){var a=this.ctx;a.lineCap="round";a.lineJoin="round";a.clearRect(0,0,this.canvasWidth,this.canvasHeight);a.save();this.centered&&a.translate(this.width/2*this.pixelRatio,this.height/2*this.pixelRatio);var b=this.pixelRatio*this.zoom;a.scale(b,b);this.onPrerender(a)};e.prototype.postrenderCanvas=function(){this.ctx.restore()};e.prototype.setDragRotate=function(a){a&&(!0===a&&(a=this),this.dragRotate= a,this.bindDrag(this.element))};e.prototype.dragStart=function(){this.dragStartRX=this.dragRotate.rotate.x;this.dragStartRY=this.dragRotate.rotate.y;b.prototype.dragStart.apply(this,arguments)};e.prototype.dragMove=function(a,d){var e=Math.min(this.width,this.height),l=(d.pageX-this.dragStartX)/e*c;this.dragRotate.rotate.x=this.dragStartRX-(d.pageY-this.dragStartY)/e*c;this.dragRotate.rotate.y=this.dragStartRY-l;b.prototype.dragMove.apply(this,arguments)};return e}); (function(d,a){var b=d.Zdog;b.PathCommand=a(b.Vector)})(this,function(d){function a(a,e,k){this.method=a;this.points=e.map(b);this.renderPoints=e.map(f);this.previousPoint=k;this.endRenderPoint=this.renderPoints[this.renderPoints.length-1];"arc"==a&&(this.controlPoints=[new d,new d])}function b(a){return a instanceof d?a:new d(a)}function f(a){return new d(a)}a.prototype.reset=function(){var a=this.points;this.renderPoints.forEach(function(b,c){b.set(a[c])})};a.prototype.transform=function(a,b,d){this.renderPoints.forEach(function(c){c.transform(a, b,d)})};a.prototype.render=function(a,b,d){return this[this.method](a,b,d)};a.prototype.move=function(a,b,d){return d.move(a,b,this.renderPoints[0])};a.prototype.line=function(a,b,d){return d.line(a,b,this.renderPoints[0])};a.prototype.bezier=function(a,b,d){return d.bezier(a,b,this.renderPoints[0],this.renderPoints[1],this.renderPoints[2])};a.prototype.arc=function(a,b,d){var c=this.renderPoints[0],e=this.renderPoints[1],l=this.controlPoints[0],f=this.controlPoints[1];l.set(this.previousPoint).lerp(c, .5625);f.set(e).lerp(c,.5625);return d.bezier(a,b,l,f,e)};return a}); (function(d,a){var b=d.Zdog;b.Shape=a(b,b.Vector,b.PathCommand,b.Anchor)})(this,function(d,a,b,f){var c=f.subclass({stroke:1,fill:!1,color:"#333",closed:!0,visible:!0,path:[{}],front:{z:1},backface:!0});c.prototype.create=function(b){f.prototype.create.call(this,b);this.updatePath();this.front=new a(b.front||this.front);this.renderFront=new a(this.front);this.renderNormal=new a};var e=["move","line","bezier","arc"];c.prototype.updatePath=function(){this.setPath();this.updatePathCommands()};c.prototype.setPath= function(){};c.prototype.updatePathCommands=function(){var a;this.pathCommands=this.path.map(function(c,d){var l=Object.keys(c),g=l[0],h=c[g];if(1!=l.length||-1==e.indexOf(g))g="line",h=c;l="line"==g||"move"==g;var f=Array.isArray(h);l&&!f&&(h=[h]);g=new b(0===d?"move":g,h,a);a=g.endRenderPoint;return g})};c.prototype.reset=function(){this.renderOrigin.set(this.origin);this.renderFront.set(this.front);this.pathCommands.forEach(function(a){a.reset()})};c.prototype.transform=function(a,b,c){this.renderOrigin.transform(a, b,c);this.renderFront.transform(a,b,c);this.renderNormal.set(this.renderOrigin).subtract(this.renderFront);this.pathCommands.forEach(function(d){d.transform(a,b,c)});this.children.forEach(function(d){d.transform(a,b,c)})};c.prototype.updateSortValue=function(){var a=this.pathCommands.length,b=this.pathCommands[0].endRenderPoint,c=this.pathCommands[a-1].endRenderPoint;2<a&&b.isSame(c)&&--a;for(c=b=0;c<a;c++)b+=this.pathCommands[c].endRenderPoint.z;this.sortValue=b/a};c.prototype.render=function(a, b){var c=this.pathCommands.length;this.visible&&c&&(this.isFacingBack=0<this.renderNormal.z,this.backface||!this.isFacingBack)&&(b.isCanvas&&1==c?this.renderCanvasDot(a,b):this.renderPath(a,b))};var k=d.TAU;c.prototype.renderCanvasDot=function(a){var b=this.getLineWidth();if(b){a.fillStyle=this.getRenderColor();var c=this.pathCommands[0].endRenderPoint;a.beginPath();a.arc(c.x,c.y,b/2,0,k);a.fill()}};c.prototype.getLineWidth=function(){return this.stroke?1==this.stroke?1:this.stroke:0};c.prototype.getRenderColor= function(){return"string"==typeof this.backface&&this.isFacingBack?this.backface:this.color};c.prototype.renderPath=function(a,b){var c=this.getRenderElement(a,b),d=!(2==this.pathCommands.length&&"line"==this.pathCommands[1].method)&&this.closed,e=this.getRenderColor();b.renderPath(a,c,this.pathCommands,d);b.stroke(a,c,this.stroke,e,this.getLineWidth());b.fill(a,c,this.fill,e);b.end(a,c)};c.prototype.getRenderElement=function(a,b){if(b.isSvg)return this.svgElement};return c}); (function(d,a){var b=d.Zdog;b.Group=a(b.Anchor)})(this,function(d){var a=d.subclass({updateSort:!1,visible:!0});a.prototype.updateSortValue=function(){var a=0;this.flatGraph.forEach(function(b){b.updateSortValue();a+=b.sortValue});this.sortValue=a/this.flatGraph.length;this.updateSort&&this.flatGraph.sort(d.shapeSorter)};a.prototype.render=function(a,d){this.visible&&this.flatGraph.forEach(function(b){b.render(a,d)})};a.prototype.updateFlatGraph=function(){this.flatGraph=this.addChildFlatGraph([])}; a.prototype.getFlatGraph=function(){return[this]};return a});(function(d,a){var b=d.Zdog;b.Rect=a(b.Shape)})(this,function(d){d=d.subclass({width:1,height:1});d.prototype.setPath=function(){var a=this.width/2,b=this.height/2;this.path=[{x:-a,y:-b},{x:a,y:-b},{x:a,y:b},{x:-a,y:b}]};return d}); (function(d,a){var b=d.Zdog;b.Box=a(b,b.Anchor,b.Shape,b.Rect)})(this,function(d,a,b,f){var c=f.subclass();c.prototype.copyGraph=function(){};var e=d.TAU,k="frontFace rearFace leftFace rightFace topFace bottomFace".split(" "),g=d.extend({},b.defaults);delete g.path;k.forEach(function(a){g[a]=!0});d.extend(g,{width:1,height:1,depth:1,fill:!0});var h=a.subclass(g);h.prototype.create=function(b){a.prototype.create.call(this,b);this.updatePath();this.fill=this.fill};h.prototype.updatePath=function(){k.forEach(function(a){this[a]= this[a]},this)};k.forEach(function(a){var b="_"+a;Object.defineProperty(h.prototype,a,{get:function(){return this[b]},set:function(c){this[b]=c;this.setFace(a,c)}})});h.prototype.setFace=function(a,b){var d=a+"Rect",e=this[d];if(b){var f=this.getFaceOptions(a);f.color="string"==typeof b?b:this.color;e?e.setOptions(f):e=this[d]=new c(f);e.updatePath();this.addChild(e)}else this.removeChild(e)};h.prototype.getFaceOptions=function(a){return{frontFace:{width:this.width,height:this.height,translate:{z:this.depth/ 2}},rearFace:{width:this.width,height:this.height,translate:{z:-this.depth/2},rotate:{y:e/2}},leftFace:{width:this.depth,height:this.height,translate:{x:-this.width/2},rotate:{y:-e/4}},rightFace:{width:this.depth,height:this.height,translate:{x:this.width/2},rotate:{y:e/4}},topFace:{width:this.width,height:this.depth,translate:{y:-this.height/2},rotate:{x:-e/4}},bottomFace:{width:this.width,height:this.depth,translate:{y:this.height/2},rotate:{x:e/4}}}[a]};"color stroke fill backface front visible".split(" ").forEach(function(a){var b= "_"+a;Object.defineProperty(h.prototype,a,{get:function(){return this[b]},set:function(c){this[b]=c;k.forEach(function(b){var d=this[b+"Rect"];b="string"==typeof this[b];b="color"==a&&b;d&&!b&&(d[a]=c)},this)}})});return h});</script>
    
    <script>function SfxrParams(){this.setSettings=function(r){for(var a=0;a<24;a++)this[String.fromCharCode(97+a)]=r[a]||0;this.c<.01&&(this.c=.01);var t=this.b+this.c+this.e;if(t<.18){var e=.18/t;this.b*=e,this.c*=e,this.e*=e}}}function SfxrSynth(){var r,a,t,e,s,n,i,h,f,c,o,v;this._params=new SfxrParams,this.reset=function(){var r=this._params;e=100/(r.f*r.f+.001),s=100/(r.g*r.g+.001),n=1-r.h*r.h*r.h*.01,i=-r.i*r.i*r.i*1e-6,r.a||(o=.5-r.n/2,v=5e-5*-r.o),h=1+r.l*r.l*(r.l>0?-.9:10),f=0,c=1==r.m?0:(1-r.m)*(1-r.m)*2e4+32},this.totalReset=function(){this.reset();var e=this._params;return r=e.b*e.b*1e5,a=e.c*e.c*1e5,t=e.e*e.e*1e5+12,3*((r+a+t)/3|0)},this.synthWave=function(u,b){var w=this._params,m=1!=w.s||w.v,y=w.v*w.v*.1,g=1+3e-4*w.w,k=w.s*w.s*w.s*.1,S=1+1e-4*w.t,l=1!=w.s,p=w.x*w.x,d=w.g,x=w.q||w.r,A=w.r*w.r*w.r*.2,q=w.q*w.q*(w.q<0?-1020:1020),M=w.p?32+((1-w.p)*(1-w.p)*2e4|0):0,_=w.d,U=w.j/2,j=w.k*w.k*.01,C=w.a,P=r,R=1/r,W=1/a,z=1/t,B=5/(1+w.u*w.u*20)*(.01+k);B>.8&&(B=.8),B=1-B;for(var D,E,F,G,H,I,J=!1,K=0,L=0,N=0,O=0,Q=0,T=0,V=0,X=0,Y=0,Z=0,$=new Array(1024),rr=new Array(32),ar=$.length;ar--;)$[ar]=0;for(ar=rr.length;ar--;)rr[ar]=2*Math.random()-1;for(ar=0;ar<b;ar++){if(J)return ar;if(M&&++Y>=M&&(Y=0,this.reset()),c&&++f>=c&&(c=0,e*=h),(e*=n+=i)>s&&(e=s,d>0&&(J=!0)),E=e,U>0&&(Z+=j,E*=1+Math.sin(Z)*U),(E|=0)<8&&(E=8),C||((o+=v)<0?o=0:o>.5&&(o=.5)),++L>P)switch(L=0,++K){case 1:P=a;break;case 2:P=t}switch(K){case 0:N=L*R;break;case 1:N=1+2*(1-L*W)*_;break;case 2:N=1-L*z;break;case 3:N=0,J=!0}x&&((F=0|(q+=A))<0?F=-F:F>1023&&(F=1023)),m&&g&&((y*=g)<1e-5?y=1e-5:y>.1&&(y=.1)),I=0;for(var tr=8;tr--;){if(++V>=E&&(V%=E,3==C))for(var er=rr.length;er--;)rr[er]=2*Math.random()-1;switch(C){case 0:H=V/E<o?.5:-.5;break;case 1:H=1-V/E*2;break;case 2:H=.225*(((H=1.27323954*(G=6.28318531*((G=V/E)>.5?G-1:G))+.405284735*G*G*(G<0?1:-1))<0?-1:1)*H*H-H)+H;break;case 3:H=rr[Math.abs(32*V/E|0)]}m&&(D=T,(k*=S)<0?k=0:k>.1&&(k=.1),l?(Q+=(H-T)*k,Q*=B):(T=H,Q=0),O+=(T+=Q)-D,H=O*=1-y),x&&($[X%1024]=H,H+=$[(X-F+1024)%1024],X++),I+=H}I*=.125*N*p,u[ar]=I>=1?32767:I<=-1?-32768:32767*I|0}return b}}var synth=new SfxrSynth;window.jsfxr=function(r){synth._params.setSettings(r);var a=synth.totalReset(),t=new Uint8Array(4*((a+1)/2|0)+44),e=2*synth.synthWave(new Uint16Array(t.buffer,44),a),s=new Uint32Array(t.buffer,0,44);s[0]=1179011410,s[1]=e+36,s[2]=1163280727,s[3]=544501094,s[4]=16,s[5]=65537,s[6]=44100,s[7]=88200,s[8]=1048578,s[9]=1635017060,s[10]=e,e+=44;for(var n=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";n<e;n+=3){var f=t[n]<<16|t[n+1]<<8|t[n+2];h+=i[f>>18]+i[f>>12&63]+i[f>>6&63]+i[63&f]}return h};</script>
    
    <script>x=game.getContext`2d`;const TAU=Zdog.TAU,c_startverticalspeed=1,c_addverticalspeed=1;c_fallspeed=3,c_dropspeed=5;const c_adddropspeed=.025,c_jumpspeed=5,c_addjumpspeed=.1,c_starttime=60,c_startjackpot=5,c_timegainperblock=.2,c_horborder=200,c_yflipmargin=60;inputbuffer="",inputtime=0,state=0,paused=!1,canstartgame=!1,playermovex=0,playermovey=1,flipped=1,flipvisual=1,flipy=9e3,fliptop=0,flipbottom=0,cameray=0,shakex=0,shakey=0,shakeduration=0,obstacle=[],visobstacle=[],dots=[],timeleft=c_starttime,timejackpot=c_startjackpot,score=0,hiscore=0,activated=0,activategoal=0,level=5;const times=[];let fps;seed=200,lasttimestamp=performance.now(),palette=0,palletename="",c=[],c[0]="#223e32",c[1]="#A7C06D",c[2]="#b3dd52",c[3]="#015d00",c[4]="#04bf00",c[5]="#ffffff",palettename="Default Colors",bgcolor=c[0],document.addEventListener("DOMContentLoaded",HtmlLoaded),initGame(),switchPalette(palette),setInterval(e=>{step(!1)},1/60*1e3),onkeydown=(e=>{"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&" "!=e.key&&"Backspace"!=e.key||e.preventDefault(),input(e.key)});let pageWidth=window.innerWidth||document.body.clientWidth,treshold=10,touchstartX=0,touchstartY=0,touchendX=0,touchendY=0;const limit=Math.tan(.375*Math.PI),gestureZone=document.getElementById("game");function initGame(){illo=new Zdog.Illustration({element:".zdog-canvas",dragRotate:!1,zoom:2,resize:!0,rotate:{x:-TAU/16,y:TAU/16},onPrerender:function(e){e.beginPath(),e.rect(-1080,-1080,2160,2160),e.fillStyle=bgcolor,e.fill()}}),player=new Zdog.Group({addTo:illo,transform:{z:25}}),head=new Zdog.Shape({addTo:player,stroke:24,color:c[4]}),eyes=new Zdog.Shape({addTo:player,stroke:5,color:"#fff",translate:{z:5},path:[{x:-6,y:-10},{x:-6,y:0},{move:{x:6,y:-10}},{x:6,y:0}]}),legs=new Zdog.Shape({addTo:player,stroke:5,color:c[4],translate:{y:16,z:5},path:[{x:-6,y:-10},{x:-6,y:0},{x:-10,y:0},{move:{x:6,y:-10}},{x:6,y:0},{x:10,y:0}]}),border=new Zdog.Shape({addTo:illo,stroke:8,color:c[1],path:[{x:-c_horborder-10,y:-700},{x:-c_horborder-10,y:700},{move:{x:c_horborder+10,y:-700}},{x:c_horborder+10,y:700}]}),flipline=new Zdog.Shape({addTo:illo,stroke:8,color:c[1],translate:{z:25},path:[{x:1*-c_horborder},{x:.9*-c_horborder},{move:{x:.8*-c_horborder}},{x:.7*-c_horborder},{move:{x:.6*-c_horborder}},{x:.5*-c_horborder},{move:{x:.4*-c_horborder}},{x:.3*-c_horborder},{move:{x:.2*-c_horborder}},{x:.1*-c_horborder},{move:{x:0}},{x:.1*c_horborder},{move:{x:.2*c_horborder}},{x:.3*c_horborder},{move:{x:.4*c_horborder}},{x:.5*c_horborder},{move:{x:.6*c_horborder}},{x:.7*c_horborder},{move:{x:.8*c_horborder}},{x:.9*c_horborder},{move:{x:c_horborder}},{x:1.1*c_horborder}]}),dotanchor=new Zdog.Group({addTo:border});for(var e=0;100!=e;e+=1){var t=Math.round(10*random())/10,l="bb";t>4&&(l="88"),t>7&&(l="44"),dots[e]=new Zdog.Shape({addTo:dotanchor,translate:{x:2e3*random()-1e3,y:1e3*random(),z:1e3*random()},stroke:10*t,color:c[4]+l})}trail=new Zdog.Shape({addTo:illo,stroke:15,color:c[5]+"44",closed:!1,translate:{z:-200}}),checkCookie(),resizeScreen(),loadLevel(),draw()}function loadLevel(){if(obstacle.length>1)for(var e=0;e!=obstacle.length;e++)obstacle[e].remove(),obstacle[e]=void 0;0==state||2==state?(player.visible=!1,trail.visible=!1):(player.visible=!0,trail.visible=!0,i1.style.visibility="visible",i2.style.visibility="visible",i3.style.visibility="visible"),border.color=c[1],flipline.color=c[1],trail.translate.z=-200,11==level?seed=1e6*Math.random()+1e4:seed=1e3*level,c_fallspeed=3,c_dropspeed=5,obstacle.length=0,visobstacle.length=0,trail.path.length=0,flipped=1,flipvisual=1,bgcolor=c[0],player.translate.x=0,player.translate.y=-50,playermovex=0,1==state?playermovey=c_fallspeed:playermovey=c_fallspeed/2;var t=0;11==level?(timeleft=c_starttime,timejackpot=c_startjackpot,score=0,t=10):(t=1+4*level,timeleft=12+8*level),illo.rotate={x:-TAU/16,y:TAU/16},flipy=generateObstacles(t,100,flipped)+c_yflipmargin,11!=level&&(activated=0,activategoal=Math.round(obstacle.length*(1.6+.08*level))),flipline.translate.y=flipy,fliptop=0,flipbottom=flipy}function generateObstacles(e,t,l){for(var a=t,o=0;o!=e;o++){var r=Math.round(10*random());-1==r&&(r=Math.round(10*random()));var i=0,s=0,n=0,c=0,d=random()>=.1;switch(-1==flipped&&(d=!d),r){case 0:s=40+Math.round(10*random())/10*100,n=.5*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,obstacle[obstacle.length]=addObstacle(n+.5*c_horborder,c,40,s,d),obstacle[obstacle.length]=addObstacle(-n-.5*c_horborder,c,40,s,d);break;case 1:s=40+Math.round(10*random())/10*100,n=.7*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,obstacle[obstacle.length]=addObstacle(n,c,40,s,d),c+=50*l,obstacle[obstacle.length]=addObstacle(-n,c,40,s,d),a+=50*l;break;case 2:n=.8*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,s=30,obstacle[obstacle.length]=addObstacle(n,c,64,s,d),c+=50*l,obstacle[obstacle.length]=addObstacle(n,c,24,s,d),a+=80*l;break;case 3:s=80,n=.25*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,obstacle[obstacle.length]=addObstacle(n-.4*c_horborder,c,24,s,d),obstacle[obstacle.length]=addObstacle(n,c,24,s,d),obstacle[obstacle.length]=addObstacle(n+.4*c_horborder,c,24,s,d),a+=50*l;break;case 4:s=40+Math.round(10*random())/10*100,n=.25*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,obstacle[obstacle.length]=addObstacle(n-.35*c_horborder,c,40,s,d),c+=50*l,obstacle[obstacle.length]=addObstacle(n,c,40,s,d),c+=50*l,obstacle[obstacle.length]=addObstacle(n+.35*c_horborder,c,40,s,d),a+=150*l;break;case 5:i=s=80+Math.round(10*random())/10*40;n=.25*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,obstacle[obstacle.length]=addObstacle(n,c,.75*i,8,d),c+=s/2*l,obstacle[obstacle.length]=addObstacle(n-.35*c_horborder,c,16,s,d),obstacle[obstacle.length]=addObstacle(n+.35*c_horborder,c,16,s,d),c+=s/2*l,obstacle[obstacle.length]=addObstacle(n,c,.9*i,8,d),a+=100*l;break;case 6:n=.1*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a+40*l,s=16,obstacle[obstacle.length]=addObstacle(n,c,1.5*c_horborder,s,d),a+=80*l;break;default:s=40+Math.round(10*random())/10*100,n=.8*(Math.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),c=a,obstacle[obstacle.length]=addObstacle(n,c,40,s,d)}a+=(40+s)*l}return a}function addObstacle(e,t,l,a,o){var r=c[3];1==o&&(r=c[2]);var i=new Zdog.Box({addTo:illo,width:l,height:a,frontFace:!1,backFace:!1,depth:16,stroke:8,cornerRadius:20,color:r,visible:!1,translate:{x:e,y:t,z:50*o-25}});return i.zspeed=0,i}function step(e){inputtime>=2&&""!=inputbuffer&&(inputtime-=1,input(inputbuffer),1==inputtime&&(inputtime=0,inputbuffer="")),1==state&&0==paused&&(timeleft-=1/60,timeleft<=0&&gameOver());const t=performance.now();for(;times.length>0&&times[0]<=t-1e3;)times.shift();if(times.push(t),fps=times.length,document.getElementById("fps-display").innerHTML=fps.toString()+" fps",i1.innerHTML="Time: "+timeleft.toFixed(2).toString(),timeleft<10?i1.style.color="#F08080":i1.style.color="white",11==level){i2.innerHTML="All clear: +"+timejackpot.toString();var l=(player.translate.y-(fliptop-c_yflipmargin))/(flipbottom+c_yflipmargin-(fliptop-c_yflipmargin))*9.25;-1==flipped&&(l=9.45-l),l=Math.max(0,l),i3.innerHTML="Flips: "+score.toString()+"."+l.toFixed(0).toString()}else i2.innerHTML=activated.toString()+" of "+activategoal.toString(),i3.innerHTML="Level:\n"+level.toString();if(!paused||0!=e){if(shakeduration>0?(illo.translate={x:0+shakex,y:cameray+shakey},shakeduration-=1,shakeduration<=0&&(shakex="",shakey="")):illo.translate={x:0,y:cameray},0!=playermovex&&(playermovex+=c_addverticalspeed*Math.sign(playermovex)),(playermovey<=-c_dropspeed&&-1==flipped||playermovey>=c_dropspeed&&1==flipped)&&1==state&&0==playermovex?playermovey+=c_adddropspeed*Math.sign(playermovey):(1==flipped&&playermovey<1||-1==flipped&&playermovey>-1)&&0==playermovex&&(playermovey+=c_addjumpspeed*flipped),flipvisual!=flipped&&(-1==flipped?(illo.rotate.x+=TAU/64,flipvisual-=1/16):(illo.rotate.x+=TAU/64,flipvisual+=1/16)),1==flipped&&player.translate.y>flipy||-1==flipped&&player.translate.y<flipy){player.translate.y=flipy,flipped=-flipped;var a=player.translate.y;player.translate.y=0;for(var o=0;o!=obstacle.length;o+=1)obstacle[o].translate.y-=a;for(o=0;o!=trail.path.length;o+=1)trail.path[o].y-=a;if(fliptop-=a,flipbottom-=a,dotanchor.translate.y-=a,11==level&&(c_dropspeed+=.1,c_fallspeed+=.1),playermovey=flipped*c_fallspeed,0!=state&&2!=state||(playermovey=flipped*c_fallspeed*.5),11==level){score+=1;var r=!0;if(1==flipped){for(o=0;o!=obstacle.length;o+=1)if(25!=obstacle[o].translate.z){r=!1;break}flipbottom=generateObstacles(1,flipbottom-50,flipped),flipy=flipbottom+c_yflipmargin}else{for(o=0;o!=obstacle.length;o+=1)if(-25!=obstacle[o].translate.z){r=!1;break}fliptop=generateObstacles(1,fliptop+50,flipped),flipy=fliptop-c_yflipmargin}r&&("jackpot-claim-2"!=i2.style.animationName?i2.style.animation="jackpot-claim-2 1s ease-in-out":i2.style.animation="jackpot-claim-1 1s ease-in-out",timeleft+=timejackpot,sound([0,,.07,.57,.24,.75,,,,,,,,,,,,,1,,,,,.2]))}else 1==flipped?flipy=flipbottom+c_yflipmargin:flipy=fliptop-c_yflipmargin;flipline.translate.y=flipy,timejackpot=c_startjackpot,1==state&&sound([0,,,,.39,.39,,.13,,,,,,.57,,.44,,,1,,,,,.15]),-1==flipped?(bgcolor=c[1],border.color=c[0],flipline.color=c[0],trail.translate.z=200):(bgcolor=c[0],border.color=c[1],flipline.color=c[1],trail.translate.z=-200)}visobstacle.length=0;for(o=0;o!=obstacle.length;o++)0!=obstacle[o].zspeed&&(obstacle[o].translate.z>=35?(obstacle[o].translate.z=25,obstacle[o].zspeed=0):obstacle[o].translate.z<=-35?(obstacle[o].translate.z=-25,obstacle[o].zspeed=0):obstacle[o].translate.z+=5*Math.sign(obstacle[o].zspeed)),obstacle[o].translate.y>player.translate.y-700&&obstacle[o].translate.y<player.translate.y+1e3?(obstacle[o].visible=!0,visobstacle[visobstacle.length]=obstacle[o]):1==obstacle[o].visible&&(obstacle[o].visible=!1);for(var i=0;4!=i;i+=1)if(player.translate.x+=playermovex/4,player.translate.x>c_horborder&&(player.translate.x=c_horborder,playermovex=0,playermovey=1*flipped),player.translate.x<-c_horborder&&(player.translate.x=-c_horborder,playermovex=0,playermovey=1*flipped),player.translate.y+=playermovey/4,1==state)for(o=0;o!=visobstacle.length;o++)if(xx=visobstacle[o].translate.x-10*flipped,yy=visobstacle[o].translate.y+6,zz=visobstacle[o].translate.z,w=visobstacle[o].width,aw=1.2*visobstacle[o].width,h=visobstacle[o].height-4,(1==flipped&&25==zz||-1==flipped&&-25==zz)&&player.translate.x>xx-aw&&player.translate.x<xx+aw&&player.translate.y>yy-h&&player.translate.y<yy+h){var s=!1;0==playermovex?player.translate.x>xx-w&&player.translate.x<xx+w?(playermovey=c_dropspeed*flipped,shakey=2,shakeduration=2,shakex=0,shakey=10,shakeduration=3,s=!0):s=!0:player.translate.x>xx-w&&player.translate.x<xx+w&&(playermovex>0?shakex=5:playermovex<0?shakex=-5:shakex=0,playermovex=0,playermovey=c_dropspeed*flipped,shakey=0,shakeduration=2,s=!0),s&&(pushObstacleToFlipside(visobstacle[o]),sound([0,,.035,,.15+.5*random(),.49,,-.53,,,,,,.03,,,,,1,,,,,.15]))}draw()}}function pushObstacleToFlipside(e){25==e.translate.z?(e.zspeed=-10,e.translate.z+=e.zspeed,e.color=c[3]):(e.zspeed=10,e.translate.z+=e.zspeed,e.color=c[2]),11==level?timeleft+=c_timegainperblock:("jackpot-gain-2"!=i2.style.animationName?i2.style.animation="jackpot-gain-2 1s":i2.style.animation="jackpot-gain-1 1s",activated+=1,activated>=activategoal&&gameWin())}function handleGesture(e){let t=touchendX-touchstartX,l=touchendY-touchstartY,a=Math.abs(t/l),o=Math.abs(l/t);Math.abs(t)>treshold||Math.abs(l)>treshold?(o<=limit&&input(t<0?"ArrowLeft":"ArrowRight"),a<=limit&&input(l<0?"ArrowUp":"ArrowDown")):input(" ")}function input(e){if(e!=inputbuffer&&(inputbuffer=""),0==state){if(" "==e&&canstartgame)return l1.style.animation="gamestart-top 1s ease-in",l2.style.animation="gamestart-bottom 1s ease-in",not.style.visibility="hidden",sound([1,,.08,,.5,.26,,.43,,,,,,,,.68,,,1,,,,,.15]),setTimeout(function(){l1.style.visibility="hidden",l2.style.visibility="hidden"},975),void(0==hiscore?(state=1,level=1,loadLevel(level),l3.style.visibility="hidden"):(state=2,level,Math.min(hiscore,11),switchPalette(palette),updateLevelSelect()))}else if(2==state)"ArrowLeft"==e||"a"==e||"q"==e?(level-=1,0==level&&(level=1),updateLevelSelect()):"ArrowRight"==e||"d"==e?(level+=1,level==hiscore+2&&(level=hiscore+1),level>11&&(level=11),updateLevelSelect()):"ArrowUp"==e||"w"==e||"z"==e?(palette-=1,-1==palette&&(palette=6),switchPalette(palette),updateLevelSelect()):"ArrowDown"==e||"s"==e?(palette+=1,7==palette&&(palette=0),switchPalette(palette),updateLevelSelect()):" "==e&&(state=1,loadLevel(level),sound([3,,.22,.49,.4,.15,,-.39,,,,-.68,.69,,,,,,1,,,,,.25]),d.style.visibility="hidden",d3.style.visibility="hidden",d4.style.visibility="hidden",k.style.visibility="hidden",l3.style.visibility="hidden");else if(1==state){if("Escape"==e)return void pause(-1);if(paused&&"Backspace"==e&&("hidden"==l3.style.visibility?(l3.style.visibility="visible",l3.innerHTML="Confirm with [Backspace]"):(l3.style.visibility="hidden",pause(-1),gameOver()))," "==e)return void pause(!1);if(paused)return"f"==e?void step(!0):void 0;var t=0;if("ArrowLeft"!=e&&"a"!=e&&"q"!=e||(t=-1),"ArrowRight"!=e&&"d"!=e||(t=1),0!=t&&0==playermovex)return playermovex=c_startverticalspeed*t,playermovey=0,void sound([1,,.22,.26,.11,.41+.3*random(),.21,-.3,,.06,.02,,,.43,.19,,,,1,-.04,,.18,.01,.15]);if(!("ArrowUp"!=e&&"w"!=e&&"z"!=e||Math.sign(playermovey)!=flipped&&0!=Math.sign(playermovey)))return playermovex=0,playermovey=-c_jumpspeed*flipped,void sound([0,,.05,,.18,.38+.3*random(),.02,.24,.04,,.05,,,.31,.07,.06,,.08,.9,-.03,.02,.15,.03,.15]);if(("ArrowDown"==e||" "==e||"s"==e)&&(playermovey<c_dropspeed&&1==flipped||playermovey>-c_dropspeed&&-1==flipped))return playermovex=0,playermovey=c_dropspeed*flipped,void sound([1,,.25,.01,,.43+.2*random(),.27,-.25,,,,,,.79,-.66,,.2,-.18,1,,,,,.15]);0!=inputtime&&e==inputbuffer||(inputbuffer=e,inputtime=10)}}function draw(){var e=TAU/4*(1-flipvisual);-1==flipped&&(e=TAU/4*flipvisual+TAU/4*3),player.rotate={y:.08*-playermovex,x:-.15*playermovey*flipvisual+e},dotanchor.translate.y=-(player.translate.y/20+500+playermovey),border.translate.y=player.translate.y,player.visible&&trail.visible&&(trail.path[trail.path.length]={x:player.translate.x-5+10*random()-80*flipped,y:player.translate.y-2.5+5*random()+80*flipped},trail.path.length>250&&trail.path.shift(),trail.updatePath()),cameray=-flipvisual*player.translate.y*.925-100,illo.updateRenderGraph()}function gameWin(){0!=state&&2!=state&&(l1.innerHTML="Goal!",l2.innerHTML="You win",l3.innerHTML="Space/Tap for next level",level-1==hiscore&&11!=level&&(hiscore=level,level=hiscore+1,not.style.visibility="visible",10!=hiscore?(not.innerHTML="You unlocked level "+(hiscore+1).toString()+"!<br>Progress saved.",setCookie("backflipped_level",hiscore)):(not.innerHTML="You unlocked Endless mode!<br>Thanks for playing the game!",setCookie("backflipped_level",hiscore))),sound([0,,.3,,.5,.3,,.1,,.23,.4,,,.1,,,,,1,,,,,.26]),gameEnd())}function gameOver(){0!=state&&2!=state&&(l1.innerHTML="Time up",l2.innerHTML="You lose",l3.innerHTML="Space or Tap to try again",11==level&&score>hiscore&&hiscore>0&&(not.style.visibility="visible",not.innerHTML="Congrats!<br>You broke the old highscore of<br>"+hiscore.toString()+" with a new score of <b>"+score.toString()+"</b>!",hiscore=score,setCookie("backflipped_level",hiscore)),sound([3,,.18,.23,.18,.15,,-.23,,,,,,,,.58,,,1,,,,,.26]),gameEnd())}function gameEnd(){state=0,player.visible=!1,playermovey=.5*flipped,canstartgame=!1,i1.style.visibility="hidden",i2.style.visibility="hidden",i3.style.visibility="hidden",l1.style.animation="",l2.style.animation="",l1.style.visibility="visible",l2.style.visibility="visible",l1.style.color=c[0],l2.style.textShadow="-2px -5px "+c[0],l2.style.color=c[1],l2.style.textShadow="-2px -5px "+c[1],sound([0,,.021,,.28,.38,,-.4,,,,,,.12,,,,,1,,,,,.16]),setTimeout(function(){canstartgame=!0,l3.style.visibility="visible"},1e3)}function updateLevelSelect(){d.style.visibility="visible",k.style.visibility="visible",level<=10?d2.innerHTML=level.toString()+"/10":d2.innerHTML="∞ Endless",1==level?d3.style.visibility="hidden":d3.style.visibility="visible",level==hiscore+1||11==level?d4.style.visibility="hidden":d4.style.visibility="visible",k1.innerHTML="Colors ("+(palette+1).toString()+"/7)",k2.innerHTML=palettename}function random(){var e=1e4*Math.sin(seed++);return e-Math.floor(e)}function resizeScreen(){document.getElementById("game");window.innerWidth>850&&window.innerHeight>600?illo.zoom=2:window.innerWidth>600&&window.innerHeight>400?illo.zoom=1.5:window.innerWidth>400&&window.innerHeight>300?illo.zoom=1:window.innerWidth>350&&window.innerHeight>250?illo.zoom=.9:window.innerWidth>300&&window.innerHeight>200?illo.zoom=.8:illo.zoom=.7,draw()}function sound(e){var t=jsfxr(e),l=new Audio;l.src=t,l.play()}function pause(e){if(0!=state&&2!=state){if(-1==e)paused=!paused;else{if(paused==e)return;paused=e}paused?(not.style.visibility="visible",n.innerHTML="PAUSED, [Space] or [Tap] to resume<br>[Backspace] to give up",i1.style.visibility="hidden",i2.style.visibility="hidden",i3.style.visibility="hidden"):(not.style.visibility="hidden",i1.style.visibility="visible",i2.style.visibility="visible",i3.style.visibility="visible",l3.style.visibility="hidden")}}function HtmlLoaded(){l1=document.getElementById("l1"),l2=document.getElementById("l2"),l3=document.getElementById("l3"),i1=document.getElementById("i1"),i2=document.getElementById("i2"),i3=document.getElementById("i3"),d=document.getElementById("d"),d1=document.getElementById("d1"),d2=document.getElementById("d2"),d3=document.getElementById("d3"),d4=document.getElementById("d4"),k=document.getElementById("k"),k1=document.getElementById("k1"),k2=document.getElementById("k2"),k3=document.getElementById("k3"),k4=document.getElementById("k4"),n=document.getElementById("not"),canstartgame=!0,document.getElementById("game").focus()}function isOdd(e){return e%2}function switchPalette(e){if(1==e&&hiscore<3)palettename="⚿ (Beat level 3 to unlock)";else if(2==e&&hiscore<5)palettename="⚿ (Beat level 5 to unlock)";else if(3==e&&hiscore<10)palettename="⚿ (Beat level 10 to unlock)";else if(4==e&&hiscore<15)palettename="⚿ (Reach 15 flips in Endless mode)";else if(5!=e||document.monetization&&"started"===document.monetization.state)if(6!=e||document.monetization&&"started"===document.monetization.state){switch(palette){case 0:c[0]="#223e32",c[1]="#A7C06D",c[2]="#b3dd52",c[3]="#015d00",c[4]="#04bf00",c[5]="#ffffff",palettename="Default Colors";break;case 1:c[0]="#A5836A",c[1]="#FD3633",c[2]="#D33826",c[3]="#E8BD32",c[4]="#668D2E",c[5]="#ffffff",palettename="Strawberry Patch";break;case 2:c[0]="#22393F",c[1]="#00B8B5",c[2]="#50DADC",c[3]="#0087BD",c[4]="#14A9FF",c[5]="#ffffff",palettename="Blueberry Juice";break;case 3:c[0]="#71009F",c[1]="#FE9BCC",c[2]="#FEAED6",c[3]="#AF00F5",c[4]="#ffffff",c[5]="#000000",palettename="Bright & Light";break;case 4:c[0]="#dddddd",c[1]="#222222",c[2]="#444444",c[3]="#bbbbbb",c[4]="#888888",c[5]="#ffffff",palettename="Stylish Monochrome";break;case 5:c[0]="#0F5FA4",c[1]="#9CC6EC",c[2]="#BBD6E7",c[3]="#4087C9",c[4]="#ffffff",c[5]="#000000",palettename="Coil Exclusive: Beau Blueprint";break;case 6:c[0]="#FE875C",c[1]="#8A320A",c[2]="#522313",c[3]="#955857",c[4]="#F7FF57",c[5]="#444444",palettename="Coil Exclusive: Dawnbreak"}1==flipped?(bgcolor=c[0],border.color=c[1],flipline.color=c[1]):(bgcolor=c[1],border.color=c[0],flipline.color=c[0]);for(var t=0;t!=obstacle.length;t++)25==obstacle[t].translate.z?obstacle[t].color=c[2]:obstacle[t].color=c[3];for(t=0;t!=dots.length;t++)dots[t].color=c[4];head.color=c[4],legs.color=c[4],eyes.color=c[5],trail.color=c[5]+"44"}else palettename="⚿ (Exclusive for Coil subscribers)";else palettename="⚿ (Exclusive for Coil subscribers)"}function setCookie(e,t){localStorage.setItem(e,t)}function getCookie(e){var t=localStorage.getItem(e);return null==t?"noone":parseInt(t)}function checkCookie(){var e=getCookie("backflipped_level");"noone"!=e?(hiscore=e,level=Math.min(11,hiscore+1)):setCookie("backflipped_level",0)}gestureZone.addEventListener("touchstart",function(e){touchstartX=e.changedTouches[0].screenX,touchstartY=e.changedTouches[0].screenY},!1),gestureZone.addEventListener("touchend",function(e){touchendX=e.changedTouches[0].screenX,touchendY=e.changedTouches[0].screenY,handleGesture(e)},!1),window.addEventListener("resize",function(){resizeScreen()}),document.addEventListener("visibilitychange",function(){pause(!0)});</script>
    <p class="title top" id="l1">Back</p><p class="title bottom" id="l2">Flipped</p><p class="title start" id="l3">Press Space or Tap Screen</p><p class="int remaining" id="i1">Time: ?</p><p class="int jackpot" id="i2">+? sec</p><p class="int score" id="i3">Flips: ?</p>  <div id="d" class="levelselect"><div class="lvl label" id="d1">Level:</div><span class="lvl arrowleft" id="d3">←&nbsp;</span><b><span class="lvl number" id="d2">1</span></b><span class="lvl arrowright" id="d4">&nbsp;→</span>  </div>  <div id="k" class="colorselect"><div class="clr label" id="k1">Color Pallete:</div><div class="clr arrowup" id="k3">↑</div><b><div class="clr number" id="k2">Default colors</div></b><div class="clr arrowdown" id="k4">↓</div>  </div><p class = "debug">  To do:<br>  - Cram in 13kb<br>  - Music<br>  - Screenshots (160x & 400x250)<br>  <b>Deadline 13 September!</b></p>  <div class="notification" id="not">Game by <b>Tom Hermans (@Auroriax)</b><br><br><b>How to play (Keyboard/Swipe):</b><br>🡸 Left 🡺 Right: Kick<br>🡹 Up: Jump<br>🡻 Down: Rush <br>Touched platforms move to<br>background and increase jackpot.<br>Reach bottom of level to claim<br>jackpot and <b>flip to the backside!</b><br>You lose when time runs out...  </div>  <div class="stats"><div id="fps-display">N/A FPS</div> </div>  </body></html>